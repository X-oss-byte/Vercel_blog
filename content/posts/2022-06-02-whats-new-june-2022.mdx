---
title: "What’s new in June 2022?"
description: Updates to XState, @xstate/test and the Stately editor in the last month.
tags:
  - stately
  - xstate
  - announcement
  - release
  - lightmode
  - xstate test
author:
  - Laura Kalbag
publishedAt: "2022-06-02"
ogImage: "https://stately.ai/blog/2022-06-02-whats-new-june-2022.png"
---

We’ve had a busy month and have plenty to share with you this June!

## Another Stately update

In May, we welcomed three new people to the Stately team. Kevin Maes and Anders Mellson join us as engineers, and Nick Perich as our product designer. Watch all three of them introduce themselves in [our office hours live stream from May 20](https://youtu.be/4WwaSZ-ciRI?t=127).

## XState Test v1 alpha

Last week we released an alpha version of the XState Test package. XState Test helps you get maximum coverage with minimal code by generating your test paths from a state machine. Below are some of the significant changes. 

### `TestModel` and test paths

We simplified how paths and plans work in `TestModel`, including changing `getShortestPlans` and `getSimplePlans` to `getShortestPaths` and `getSimplePaths`. These functions now return an array of paths instead of an array of plans which contain paths.

We also added `getPaths`, which defaults to `getShortestPaths` and can be passed a `pathGenerator` to customize how paths are generated.

`getShortestPaths()` and `getPaths()` will now traverse all _transitions_ by default, not just all events.

Take the following machine as an example:

```ts
const machine = createTestMachine({
  initial: 'toggledOn',
  states: {
    toggledOn: {
      on: {
        TOGGLE: 'toggledOff'
      }
    },
    toggledOff: {
      on: {
        TOGGLE: 'toggledOn'
      }
    }
  }
});
```

In `@xstate/test` version 0.x, this would run the following path by default:

```txt
toggledOn → TOGGLE → toggledOff
```

This was because the path satisfies two conditions:

1. Covers all states
2. Covers all events

But the path isn’t a complete test because it doesn’t test if going from `toggledOff` to `toggledOn` works.

Now, we seek to cover all transitions by default, resulting in the following path:

```txt
toggledOn → TOGGLE → toggledOff → TOGGLE → toggledOn
```

We also moved `events` from `createTestModel` to `path.test`, which allows for easier usage of per-test mocks and per-test context.

Old structure:

```ts
const model = createTestModel(machine, {
  events: {}
});
```

New structure:

```ts
const paths = model.getPaths().forEach((path) => {
  path.test({
    events: {}
  });
});
  ```

And we added `states` to `path.test()`, which allows you to define your tests outside of your machine, keeping the machine itself easy to read:

  ```ts
  const paths = model.getPaths().forEach((path) => {
    path.test({
      states: {
        myState: () => {},
        'myState.deep': () => {}
      }
    });
  });
  ```

### Event cases

We moved event cases out of `events` and into their own attribute called `eventCases`:

  ```ts
  const model = createTestModel(machine, {
    eventCases: {
      CHOOSE_CURRENCY: [
        {
          currency: 'GBP'
        },
        {
          currency: 'USD'
        }
      ]
    }
  });

  model.getPaths().forEach((path) => {
    it(path.description, async () => {
      await path.test({
        events: {
          CHOOSE_CURRENCY: ({ event }) => {
            console.log(event.currency);
          }
        }
      });
    });
  });
  ```

`eventCases` will now always produce a new path instead of only creating a path for the first case that matches.

We also removed `.testCoverage()`, and instead made `getPlans`, `getShortestPlans` and `getSimplePlans` cover all states and transitions enabled by event cases by default.

### `createTestMachine` and `createTestModel`

We added `createTestMachine`, which provides a slimmed-down API for creating machines that removes these types from the config type signature.

We also added validation on `createTestModel` to ensure you don’t include invalid machine configuration in your test machine. Invalid machine configs include `invoke`, `after`, and any actions with a `delay`.

[Watch Matt demonstrate the power of model-based testing with XState Test in a short video on Twitter](https://twitter.com/statelyai/status/1531250605313892352). [Read the XState test tag release notes on GitHub](https://github.com/statelyai/xstate/releases/tag/%40xstate%2Ftest%401.0.0-alpha.0).

## Light mode in the Stately visual editor

Nick and Anders got straight to work in their first week at Stately, creating light mode for the visual editor. We will keep improving both light mode and dark mode in the future, but we thought the initial designs were too good not to share with everyone!

![A dark mode light mode state machine in the Stately editor show in light mode.](./images/light-mode.png)

Toggle “Switch to light mode” in the editor’s menu to view the editor in light mode. Toggle “Switch to dark mode” to switch back to dark mode.

![A dark mode light mode state machine in the Stately editor show in dark mode.](./images/dark-mode.png)

## And there’s more to come!

Want to know more about what we’ve got planned? [Check out our Roadmap](https://xstate.js.org/docs/roadmap/). Got any feedback or want to suggest features? [Share your thoughts in the XState discussions](https://github.com/statelyai/xstate/discussions).

We’re also looking for your feedback on XState snippets, errors in XState, and more in our [Stately RFCs (Requests for comments)](https://github.com/statelyai/rfcs).